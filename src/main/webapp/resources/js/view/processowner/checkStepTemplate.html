<div data-role="header">
	<h1>Controllo passi</h1>
	<div class="ui-btn-left">
		<a id="options" data-role="button" data-iconpos="notext" data-icon="bars">Opzioni</a>
		<a href="#home" data-role="button" data-iconpos="notext" data-icon="home">Home</a>
		<% if(typeof stepData !== "undefined") { %>
			<a href="#checkstep" data-role="button" data-iconpos="notext" data-icon="back">Back</a>
		<% } %>
	</div>
	
</div><!-- /header -->

<div id="content">
	<% if(typeof stepData === "undefined") { %>
		<form>
			<input id="search" data-type="search">
		</form>

		<ul data-role="listview" data-inset="true" data-input="#search" data-filter="true" data-autodividers="false">
			<% for(i=0; i<processData.length; i++) { %>
				<li>
					<a href="#checkstep?stepId=<%= processData[i].stepId %>&username=<%= processData[i].username %>">
						<%= processData[i].username %>: 
						<%= steps[processData[i].stepId].description %>
					</a>
				</li>
			<% } %>
		</ul>
	<% }
	else { %>
		<ul id="processData" data-inset="true" data-role="listview" data-input="#search" data-filter="true" data-autodividers="false">
			<li>
				<p><strong><%= processData.username %></strong></p>
				<% for(i=0; i<processData.data.length; i++) {
					var value = processData.data[i];
					if(stepData.data[i].type == "image") { %>
						<p>immagine: <a href="#pop<%= value.imageUrl %>" data-rel="popup"><%= stepData.data[i].name %></a></p>
						<div data-role="popup" id="pop<%= value.imageUrl %>" class="photopopup">
							<a data-rel="back" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
							<img src="css/images/<%= value.imageUrl %>.png" class="popphoto">
						</div>
					<% }
					else if(stepData.data[i].type == "geographic") { %>
						<p><%= stepData.data[i].name %>: <%= value.coordinates.latitude %>;<%= value.coordinates.longitude %></p>
					<% }
					else if(stepData.data[i].type == "numeric") { %>
						<p><%= stepData.data[i].name %>: <%= value.numericValue %></p>
					<% }
					else if(stepData.data[i].type == "textual") { %>
						<p><%= stepData.data[i].name %>: <%= value.textValue %></p>
					<% }
					else if(stepData.data[i].type == "temporal") { %>
						<p><%= stepData.data[i].name %>: <%= value.timeValue %></p>
					<% }
				} %>

			</li>

		</ul>

		<div data-role="controlgroup">
			<button data-icon="check" id="approve">Approva</button>
			<button data-icon="forbidden" id="reject">Respingi</button>
		</div>
		
	<% } %>

</div><!-- /content -->

<div data-role="panel" id="panel" data-position="left" data-display="overlay">
	
	<button data-rel="close" data-icon="delete" data-mini="true">Chiudi pannello</button>

	<p>Ciao ProcessOwner!</p>
	
	<a data-role="button" id="logout" data-icon="power">Logout</a>

</div><!-- panel -->
